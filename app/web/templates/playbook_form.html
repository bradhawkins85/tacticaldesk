{% extends "base.html" %}

{% block header_actions %}
<a class="button button--ghost" href="{{ url_for('admin_playbooks') }}">
  ‚Üê Back to playbooks
</a>
{% endblock %}

{% block content %}
<section class="panel playbook-form-panel">
  <div class="panel__header">
    <div class="panel__intro">
      <h2 class="panel__title">{{ form_title }}</h2>
      <p class="panel__subtitle">{{ form_subtitle }}</p>
    </div>
  </div>
  {% if form_errors %}
  <div class="form-feedback error" role="alert">
    <p>We couldn't save your changes:</p>
    <ul>
      {% for error in form_errors %}
      <li>{{ error }}</li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}
  <form id="playbook-form" method="post" autocomplete="off" data-mode="{{ form_mode }}" novalidate>
    <div class="form-field">
      <label for="playbook-name">Name</label>
      <input
        id="playbook-name"
        name="name"
        type="text"
        maxlength="255"
        required
        value="{{ form_values.name | default('') }}"
        autocomplete="off"
      />
    </div>
    <div class="form-field">
      <label for="playbook-slug">Slug</label>
      <input
        id="playbook-slug"
        name="slug"
        type="text"
        maxlength="255"
        required
        pattern="^[a-z0-9]+(?:-[a-z0-9]+)*$"
        value="{{ form_values.slug | default('') }}"
        autocomplete="off"
      />
      <small class="form-field__hint">Lowercase letters, numbers, and hyphens only.</small>
    </div>
    <div class="form-field">
      <label for="playbook-description">Description</label>
      <textarea
        id="playbook-description"
        name="description"
        rows="4"
        maxlength="2048"
      >{{ form_values.description | default('') }}</textarea>
      <small class="form-field__hint">Document the high-level purpose and operational notes for this playbook.</small>
    </div>
    <div class="form-actions">
      <button class="button" type="submit" data-role="playbook-submit-label">{{ submit_label }}</button>
      <a class="button button--ghost" href="{{ url_for('admin_playbooks') }}">Cancel</a>
    </div>
  </form>
</section>
{% endblock %}
